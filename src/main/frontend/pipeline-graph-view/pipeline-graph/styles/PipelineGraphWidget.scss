// TODO: Remove manual PWGx- namespacing, replace with tooling
@import "react-tippy/dist/tippy.css";

.tippy-tooltip {
  text-align: left;
}

circle.halo {
  fill: none;
}

.PWGx-svgResultStatusOutline {
  stroke: $graph-connector-grey;
  fill: none;
}

.icon-skipped {
  color: $graph-connector-grey;
  fill: $graph-connector-grey;

  .svg-icon {
    color: $graph-connector-grey;
    fill: $graph-connector-grey;
  }
}

.PWGx-result-status-glyph {
  stroke: none;
  fill: #fff;
}

.PWGx-svgResultStatusSolid {
  transform: translateZ(0);

  > circle.statusColor {
    &.success {
      fill: $status-success;
    }
    &.failure {
      fill: $status-failure;
    }
    &.unstable {
      fill: $status-unstable;
    }
    &.aborted {
      fill: $graph-connector-grey;
    }
    &.paused {
      fill: $status-paused;
    }
    &.unknown {
      fill: $status-unknown;
    }

    .pipeline-node-selected & {
      stroke: none;
    }
  }
}

.PWGx-progress-spinner.running circle.statusColor {
  fill: none;
  stroke: $progress-bg;
}

.PWGx-progress-spinner.running path {
  fill: none;
  stroke: $progress-bar-color;
}

.PWGx-progress-spinner.pc-over-100 circle.statusColor {
  fill: none;
  stroke: $progress-bar-color;
}

.PWGx-progress-spinner.pc-over-100 path {
  fill: none;
  stroke: $status-unstable;
}

.PWGx-progress-spinner.running.spin {
  animation: progress-spinner-rotate 4s linear;
  animation-iteration-count: infinite;
}

@keyframes progress-spinner-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.PWGx-progress-spinner circle.inner,
.PWGx-progress-spinner.running.spin circle.inner {
  display: none;
  animation: progress-spinner-pulsate 1.2s ease-out;
  animation-iteration-count: infinite;
  opacity: 0;
}

.PWGx-progress-spinner.running circle.inner {
  display: block;
  fill: $progress-bar-color;
  stroke: $progress-bar-color;
}

@keyframes progress-spinner-pulsate {
  0% {
    transform: scale(0.1, 0.1);
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: scale(1.2, 1.2);
    opacity: 0;
  }
}

.PWGx-progress-spinner.queued circle.statusColor {
  fill: none;
  stroke: $graph-connector-grey;
}

.PWGx-progress-spinner.queued circle.statusColor.inner {
  display: block;
  fill: $graph-connector-grey;
  stroke: $graph-connector-grey;
}

.PWGx-progress-spinner.queued path {
  fill: none;
  stroke: none;
}

.PWGx-pipeline-connector {
  stroke: $graph-connector-grey;
}

.PWGx-pipeline-node {
  //--background-opacity: 10%;

  //display: flex;
  //align-items: center;
  //justify-content: center;
  //background: transparent;
  //outline: none;
  padding: 0;
  border-radius: 100%;
  //border: none;
  width: 24px;
  height: 24px;
  min-height: 0;

  svg {
    width: 24px;
    height: 24px;
  }

  //&::after {
  //  content: "";
  //  position: absolute;
  //  inset: -1px;
  //  background: color-mix(in srgb, currentColor var(--background-opacity), var(--card-background));
  //  border-radius: 100px;
  //  z-index: -1;
  //  transition: var(--standard-transition);
  //}

  &--success {
    color: var(--success-color);
  }

  &--failure {
    color: var(--error-color);
  }

  &--skipped {
    &::after {
      display: none;
    }

    border: 2.5px solid $graph-connector-grey;
  }

  &--unknown {
    &::after {
      display: none;
    }
  }

  .PWGx-pipeline-node-terminal {
    width: 0.875rem;
    height: 0.875rem;
    border-radius: 100px;
    background: $graph-connector-grey;
  }
}

// Button nodes feature hover and focus states
button.PWGx-pipeline-node {
  cursor: pointer;
  transition: var(--standard-transition);

  &::before {
    content: "";
    position: absolute;
    inset: -4px;
    background: var(--card-background);
    border-radius: inherit;
    z-index: -1;
  }

  &::after {
    box-shadow: 0 0 0 10px transparent;
  }

  &:hover {
    --background-opacity: 17.5%;
  }

  &:active, &:focus {
    --background-opacity: 25%;

    &::after {
      box-shadow: 0 0 0 4px color-mix(in srgb, currentColor 10%, transparent);
    }
  }
}

.PWGx-pipeline-connector-skipped {
  stroke: $graph-connector-grey;
  stroke-opacity: 0.25;
}

.PWGx-pipeline-small-label {
  font-size: 0.6875rem;
}

.PWGx-pipeline-big-label {
  font-weight: 450;
}

.PWGx-pipeline-small-label {
  font-weight: 450;
}

//.PWGx-pipeline-big-label.selected {
//  font-weight: bold;
//}

.PWGx-pipeline-big-label.pgv-graph-node--synthetic {
  font-style: italic;
}

.PWGx-pipeline-small-label.selected {
  //font-weight: bold;
  margin-top: 3px;
}

.PWGx-pipeline-selection-highlight circle {
  fill: none;
}

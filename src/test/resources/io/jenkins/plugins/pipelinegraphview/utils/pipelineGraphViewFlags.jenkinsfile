pipeline {
    agent any
    stages {
        stage('Normal Step') {
            steps {
                echo "This is a normal step without any flags"
            }
        }
        stage('Hidden True') {
            steps {
                pipelineGraphViewFlags(hidden: true) {
                    echo "This step is marked as hidden (true)"
                }
            }
        }
        stage('Hidden False') {
            steps {
                pipelineGraphViewFlags(hidden: false) {
                    echo "This step has hidden flag set to false"
                }
            }
        }
        stage('No Parameters') {
            steps {
                pipelineGraphViewFlags() {
                    echo "This step uses pipelineGraphViewFlags but with no parameters"
                }
            }
        }
        stage('Nested Flags') {
            steps {
                pipelineGraphViewFlags(hidden: true) {
                    echo "Parent step with hidden=true"
                    pipelineGraphViewFlags(hidden: false) {
                        echo "Nested step with hidden=false"
                    }
                }
            }
        }
    }
}
